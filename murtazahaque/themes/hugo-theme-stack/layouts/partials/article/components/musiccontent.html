<section class="article-content">
    <!-- Refer to https://discourse.gohugo.io/t/responsive-tables-in-markdown/10639/5 -->
    {{ $wrappedTable := printf "<div class=\"table-wrapper\">${1}</div>" }}
    {{ .Content | replaceRE "(<table>(?:.|\n)+?</table>)" $wrappedTable | safeHTML }}
</section>



<div class="article-list--profile music">

    <script type="text/javascript">
        //Domain Expansion, unlimited javascript
        function download() { 
            const buttons = document.querySelectorAll("[onclick]")
            buttons.forEach(button => {
                console.log("bird lettuce");
                
                const btnID = button.dataset.filename;

                const a = document.createElement("a");

                a.href = btnID;
                a.download = "";
                a.style.display = "none";

                button.addEventListener("click", () => {
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                });
            });
        }
    </script>

    {{ range $i, $track := .Params.tracks }}
        
        <article>

            <a target="_blank" rel="noopener">
                {{ with $track.image }}
                    <div class="article-image">
                        <img src="{{ . }}" loading="lazy">
                    </div>
                {{ end }}
                <div class="article-details">
                    <h2 class="article-title">
                        {{- $track.title -}}
                    </h2>
                    <div>
                        <audio controls> 
                            <source src="{{ $track.musictrack }}" type="audio/mpeg">
                        </audio>
                        {{ with $track.trackdwnld }}
                            <button onclick="download()" data-filename="{{ $track.trackdwnld }}">
                                Download Latest JSON
                            </button>
                        {{ end }}
                    </div>
                    <footer class="article-time">
                        {{ with $track.description }}
                            {{ . }}
                        {{ else }}
                            {{ $track.website }}
                        {{ end }}
                    </footer>
                    
                    
                </div>
            </a>

        </article>

    {{ end }}

</div>